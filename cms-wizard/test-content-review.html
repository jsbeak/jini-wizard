<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ì½˜í…ì¸  ì €ì¥ ë° ë¦¬ë·° í…ŒìŠ¤íŠ¸ - ì´í™”ì—¬ìëŒ€í•™êµ</title>
    
    <!-- ë©”ì¸ ì•±ê³¼ ë™ì¼í•œ JavaScript ì˜ì¡´ì„± ì¶”ê°€ -->
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/motion@10.16.2/dist/motion.min.js"></script>
    <script src="assets/js/performance-utils.js"></script>
    <script src="assets/js/content-storage.js"></script>
    <script src="assets/js/jsp-content-storage.js"></script>
    <script src="assets/js/api-interface.js"></script>
    <script src="assets/js/cms-integration.js"></script>
    <script src="assets/js/ai-simulator.js"></script>
    
    <style>
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            max-width: 1400px;
            margin: 0 auto;
            padding: 2rem;
            background-color: #f9fafb;
        }
        
        .container {
            background: white;
            border-radius: 12px;
            padding: 2rem;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
            margin-bottom: 2rem;
        }
        
        h1, h2 {
            color: #1f2937;
            margin-bottom: 1rem;
        }
        
        .grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 1rem;
            margin-top: 1rem;
        }
        
        .card {
            background: #f8fafc;
            border: 1px solid #e2e8f0;
            border-radius: 8px;
            padding: 1rem;
        }
        
        .card h3 {
            font-size: 1rem;
            color: #374151;
            margin-bottom: 0.5rem;
        }
        
        .card p {
            font-size: 0.875rem;
            color: #6b7280;
            margin-bottom: 0.5rem;
        }
        
        .status {
            display: inline-block;
            padding: 0.25rem 0.75rem;
            border-radius: 9999px;
            font-size: 0.75rem;
            font-weight: 500;
        }
        
        .status.waiting {
            background-color: #f3f4f6;
            color: #6b7280;
        }
        
        .status.processing {
            background-color: #dbeafe;
            color: #3b82f6;
        }
        
        .status.completed {
            background-color: #d1fae5;
            color: #059669;
        }
        
        .status.error {
            background-color: #fee2e2;
            color: #dc2626;
        }
        
        .controls {
            display: flex;
            gap: 1rem;
            margin-bottom: 2rem;
        }
        
        button {
            padding: 0.5rem 1rem;
            border: none;
            border-radius: 6px;
            font-weight: 500;
            cursor: pointer;
            transition: all 0.2s;
        }
        
        .btn-primary {
            background-color: #3b82f6;
            color: white;
        }
        
        .btn-primary:hover {
            background-color: #2563eb;
        }
        
        .btn-secondary {
            background-color: #f3f4f6;
            color: #374151;
        }
        
        .btn-secondary:hover {
            background-color: #e5e7eb;
        }
        
        .btn-danger {
            background-color: #dc2626;
            color: white;
        }
        
        .btn-danger:hover {
            background-color: #b91c1c;
        }
        
        .stats {
            display: flex;
            gap: 2rem;
            margin-bottom: 2rem;
        }
        
        .stat-item {
            text-align: center;
        }
        
        .stat-number {
            font-size: 2rem;
            font-weight: 700;
            color: #3b82f6;
        }
        
        .stat-label {
            font-size: 0.875rem;
            color: #6b7280;
        }
        
        .log-container {
            background: #1f2937;
            color: #e5e7eb;
            border-radius: 8px;
            padding: 1rem;
            height: 300px;
            overflow-y: auto;
            font-family: monospace;
            font-size: 0.875rem;
            line-height: 1.5;
        }
        
        .log-entry {
            margin-bottom: 0.25rem;
        }
        
        .log-entry.success {
            color: #10b981;
        }
        
        .log-entry.error {
            color: #ef4444;
        }
        
        .log-entry.warning {
            color: #f59e0b;
        }
        
        .log-entry.info {
            color: #3b82f6;
        }
        
        .iframe-container {
            border: 2px solid #e5e7eb;
            border-radius: 8px;
            overflow: hidden;
            height: 500px;
        }
        
        #preview-frame {
            width: 100%;
            height: 100%;
            border: none;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>ì½˜í…ì¸  ì €ì¥ ë° ë¦¬ë·° í…ŒìŠ¤íŠ¸</h1>
        <p>ì´í™”ì—¬ìëŒ€í•™êµ í…œí”Œë¦¿ì„ ì‚¬ìš©í•œ AI ì½˜í…ì¸  ìƒì„± ì‹œë®¬ë ˆì´ì…˜</p>
        
        <div class="controls">
            <button class="btn-primary" id="btn-start">ìƒì„± ì‹œë®¬ë ˆì´ì…˜ ì‹œì‘</button>
            <button class="btn-secondary" id="btn-stop">ì¤‘ì§€</button>
            <button class="btn-secondary" id="btn-review">ë¦¬ë·° ëª¨ë“œ</button>
            <button class="btn-secondary" id="btn-debug">ì €ì¥ì†Œ ë””ë²„ê·¸</button>
            <button class="btn-danger" id="btn-clear">ëª¨ë‘ ì´ˆê¸°í™”</button>
        </div>
        
        <div class="stats">
            <div class="stat-item">
                <div class="stat-number" id="completed-pages">0</div>
                <div class="stat-label">ì™„ë£Œëœ í˜ì´ì§€</div>
            </div>
            <div class="stat-item">
                <div class="stat-number" id="stored-content">0</div>
                <div class="stat-label">ì €ì¥ëœ ì½˜í…ì¸ </div>
            </div>
            <div class="stat-item">
                <div class="stat-number" id="reviewable">0</div>
                <div class="stat-label">ë¦¬ë·° ê°€ëŠ¥</div>
            </div>
        </div>
    </div>
    
    <div class="container">
        <h2>ì½˜í…ì¸  í˜„í™©</h2>
        <div class="grid" id="content-grid">
            <!-- ë™ì ìœ¼ë¡œ ìƒì„±ë¨ -->
        </div>
    </div>
    
    <div class="container">
        <h2>ì‹¤í–‰ ë¡œê·¸</h2>
        <div class="log-container" id="simulation-log">
            <!-- ë¡œê·¸ê°€ ì—¬ê¸°ì— í‘œì‹œë©ë‹ˆë‹¤ -->
        </div>
    </div>
    
    <div class="container">
        <h2>ë¯¸ë¦¬ë³´ê¸°</h2>
        <div class="iframe-container">
            <iframe id="preview-frame" src="about:blank"></iframe>
        </div>
    </div>

    <script>
        // ì „ì—­ ë³€ìˆ˜ë“¤
        let storage = null;
        let simulationInterval = null;
        let currentIndex = 0;
        
        // ë©”ì¸ ì•±ì˜ AI Simulator ì¸ìŠ¤í„´ìŠ¤ì™€ ì½˜í…ì¸  ë°ì´í„°ë² ì´ìŠ¤ ì‚¬ìš©
        let aiSimulator = null;
        let mainContentDatabase = null;
        
        // ë©”ë‰´ ë°ì´í„°
        const menuData = {
            menus: [
                {
                    id: 'about',
                    title: 'About',
                    koreanTitle: 'ëŒ€í•™ì†Œê°œ',
                    submenus: [
                        { id: 'welcome', title: 'Welcome Message', koreanTitle: 'í™˜ì˜ ë©”ì‹œì§€' },
                        { id: 'company', title: 'Company Overview', koreanTitle: 'íšŒì‚¬ ê°œìš”' },
                        { id: 'mission', title: 'Mission & Vision', koreanTitle: 'ë¯¸ì…˜ & ë¹„ì „' }
                    ]
                },
                {
                    id: 'research',
                    title: 'Research',
                    koreanTitle: 'ì—°êµ¬',
                    submenus: [
                        { id: 'areas', title: 'Research Areas', koreanTitle: 'ì—°êµ¬ ë¶„ì•¼' },
                        { id: 'projects', title: 'Current Projects', koreanTitle: 'ì§„í–‰ í”„ë¡œì íŠ¸' },
                        { id: 'publications', title: 'Publications', koreanTitle: 'ì—°êµ¬ ì„±ê³¼' }
                    ]
                },
                {
                    id: 'services',
                    title: 'Services',
                    koreanTitle: 'í•™ì‚¬',
                    submenus: [
                        { id: 'consulting', title: 'Consulting Services', koreanTitle: 'ì»¨ì„¤íŒ… ì„œë¹„ìŠ¤' },
                        { id: 'development', title: 'Development Services', koreanTitle: 'ê°œë°œ ì„œë¹„ìŠ¤' },
                        { id: 'support', title: 'Support Services', koreanTitle: 'ì§€ì› ì„œë¹„ìŠ¤' }
                    ]
                }
            ]
        };
        
        // ë©”ì¸ ì•±ê³¼ ë™ì¼í•œ ì½˜í…ì¸  ë°ì´í„°ë² ì´ìŠ¤ ê°€ì ¸ì˜¤ê¸°
        function initializeMainAppData() {
            try {
                // AISimulator ì¸ìŠ¤í„´ìŠ¤ ìƒì„± (ë©”ì¸ ì•±ê³¼ ë™ì¼)
                aiSimulator = new AISimulator(null); // appì€ nullë¡œ ì„¤ì • (í…ŒìŠ¤íŠ¸ í™˜ê²½)
                mainContentDatabase = aiSimulator.contentDatabase;
                
                console.log('âœ… ë©”ì¸ ì•± ë°ì´í„° ì´ˆê¸°í™” ì™„ë£Œ:', mainContentDatabase);
                addLog('âœ… ë©”ì¸ ì•± ë°ì´í„° ì´ˆê¸°í™” ì™„ë£Œ', 'success');
                return mainContentDatabase;
            } catch (error) {
                console.error('âŒ ë©”ì¸ ì•± ë°ì´í„° ì´ˆê¸°í™” ì‹¤íŒ¨:', error);
                addLog('âŒ ë©”ì¸ ì•± ë°ì´í„° ì´ˆê¸°í™” ì‹¤íŒ¨: ' + error.message, 'error');
                return null;
            }
        }

        // ì‹¤ì œ ì½˜í…ì¸  ë°ì´í„° ê°€ì ¸ì˜¤ê¸° (ë©”ì¸ ì•±ê³¼ ë™ì¼í•œ ë°ì´í„°ë² ì´ìŠ¤ ì‚¬ìš©)
        function getRealContentData(menuId, submenuId) {
            if (!mainContentDatabase) {
                initializeMainAppData();
            }
            
            const contentData = mainContentDatabase[menuId]?.[submenuId];
            console.log(`ğŸ” ë©”ì¸ ì•± ì½˜í…ì¸  ë°ì´í„° ì¡°íšŒ: ${menuId}/${submenuId}`, contentData);
            
            // ë©”ì¸ ì•± ë°ì´í„°ê°€ ìˆìœ¼ë©´ return, ì—†ìœ¼ë©´ ê¸°ë³¸ê°’ ë°˜í™˜
            if (contentData) {
                return contentData;
            }
            
            return {
                title: 'í˜ì´ì§€ ì œëª©',
                subtitle: 'í˜ì´ì§€ ë¶€ì œëª©',
                content: ['ê¸°ë³¸ ì½˜í…ì¸ ì…ë‹ˆë‹¤.'],
                features: [
                    { title: 'ê¸°ë³¸ ê¸°ëŠ¥', desc: 'ê¸°ë³¸ ì„¤ëª…', icon: 'ğŸ“‹' }
                ]
            };
        }
        
        // í…œí”Œë¦¿ HTML ìƒì„± (ë©”ì¸ ì•± PreviewManagerì™€ ë™ì¼í•œ í…œí”Œë¦¿)
        function generateEwhaTemplate(menu, submenu, contentData) {
            // ë©”ì¸ ì•±ì˜ PreviewManager.createTemplateContentì™€ ë™ì¼í•œ êµ¬ì¡° ì‚¬ìš©
            const pageTitle = contentData.title;
            
            function formatMainContent(content) {
                if (typeof content === 'string') {
                    return `<p>${content}</p>`;
                }
                
                if (Array.isArray(content)) {
                    return content.map(paragraph => `<p>${paragraph}</p>`).join('');
                }
                
                return `<p>${content || 'ì½˜í…ì¸ ê°€ ìƒì„±ë˜ì§€ ì•Šì•˜ìŠµë‹ˆë‹¤.'}</p>`;
            }
            
            return `
            <!DOCTYPE html>
            <html lang="ko">
            <head>
                <meta charset="UTF-8">
                <meta name="viewport" content="width=device-width, initial-scale=1.0">
                <title>${pageTitle}</title>
                <style>
                    * {
                        margin: 0;
                        padding: 0;
                        box-sizing: border-box;
                    }
                    
                    body {
                        font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
                        line-height: 1.6;
                        color: #333;
                        background: #f5f5f5;
                    }
                    
                    .header {
                        background: #fff;
                        padding: 20px 0;
                        box-shadow: 0 2px 4px rgba(0,0,0,0.1);
                        position: sticky;
                        top: 0;
                        z-index: 100;
                    }
                    
                    .container {
                        max-width: 1200px;
                        margin: 0 auto;
                        padding: 0 20px;
                    }
                    
                    .nav {
                        display: flex;
                        justify-content: space-between;
                        align-items: center;
                    }
                    
                    .logo {
                        font-size: 18px;
                        font-weight: bold;
                        color: #166534;
                        display: flex;
                        align-items: center;
                    }
                    
                    .nav-menu {
                        display: flex;
                        list-style: none;
                        gap: 30px;
                    }
                    
                    .nav-menu a {
                        text-decoration: none;
                        color: #666;
                        transition: color 0.3s;
                    }
                    
                    .nav-menu a:hover {
                        color: #166534;
                    }
                    
                    .hero {
                        background: linear-gradient(135deg, #166534 0%, #15803d 100%);
                        color: white;
                        padding: 80px 0;
                        text-align: center;
                    }
                    
                    .hero h1 {
                        font-size: 48px;
                        margin-bottom: 20px;
                        opacity: 0;
                        animation: fadeInUp 0.8s ease forwards;
                    }
                    
                    .hero p {
                        font-size: 20px;
                        opacity: 0;
                        animation: fadeInUp 0.8s ease 0.2s forwards;
                    }
                    
                    .content {
                        padding: 60px 0;
                        background: white;
                    }
                    
                    .breadcrumb {
                        display: flex;
                        gap: 8px;
                        font-size: 14px;
                        color: #666;
                        margin-bottom: 30px;
                        align-items: center;
                    }
                    
                    .breadcrumb span:last-child {
                        color: #166534;
                        font-weight: 500;
                    }
                    
                    .content h2 {
                        font-size: 36px;
                        margin-bottom: 30px;
                        color: #333;
                    }
                    
                    .content p {
                        font-size: 18px;
                        color: #666;
                        margin-bottom: 20px;
                        line-height: 1.8;
                    }
                    
                    .placeholder-text {
                        background: #f0f0f0;
                        padding: 4px 8px;
                        border-radius: 4px;
                        display: inline-block;
                        margin: 2px;
                        transition: all 0.3s ease;
                    }
                    
                    .ai-generating {
                        animation: pulse 1s ease infinite;
                    }
                    
                    @keyframes fadeInUp {
                        from {
                            opacity: 0;
                            transform: translateY(20px);
                        }
                        to {
                            opacity: 1;
                            transform: translateY(0);
                        }
                    }
                    
                    @keyframes pulse {
                        0%, 100% {
                            opacity: 0.5;
                        }
                        50% {
                            opacity: 1;
                        }
                    }
                    
                    .grid {
                        display: grid;
                        grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
                        gap: 30px;
                        margin-top: 40px;
                    }
                    
                    .card {
                        background: #f8f9fa;
                        padding: 30px;
                        border-radius: 10px;
                        box-shadow: 0 2px 10px rgba(0,0,0,0.1);
                        transition: transform 0.3s;
                    }
                    
                    .card:hover {
                        transform: translateY(-5px);
                    }
                    
                    .card h3 {
                        margin-bottom: 15px;
                        color: #333;
                    }
                    
                    .image-placeholder {
                        width: 100%;
                        height: 300px;
                        background: linear-gradient(45deg, #f0f0f0 25%, #e0e0e0 25%, #e0e0e0 50%, #f0f0f0 50%, #f0f0f0 75%, #e0e0e0 75%, #e0e0e0);
                        background-size: 20px 20px;
                        border-radius: 8px;
                        display: flex;
                        align-items: center;
                        justify-content: center;
                        color: #999;
                        font-size: 18px;
                        margin: 20px 0;
                    }
                    
                    /* Generated Content Banner */
                    .generated-banner {
                        background: linear-gradient(135deg, #10b981 0%, #059669 100%);
                        color: white;
                        padding: 8px 0;
                        text-align: center;
                        font-size: 0.875rem;
                        font-weight: 500;
                        position: sticky;
                        top: 0;
                        z-index: 200;
                        box-shadow: 0 2px 4px rgba(0,0,0,0.1);
                    }
                    
                    .generated-banner .icon {
                        margin-right: 8px;
                    }
                    
                    /* Header */
                    .header {
                        background: #ffffff;
                        border-bottom: 1px solid #e5e7eb;
                        position: sticky;
                        top: 32px;
                        z-index: 100;
                        box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1);
                    }
                    
                    .header-inner {
                        max-width: 1440px;
                        margin: 0 auto;
                        padding: 0 2rem;
                        height: 64px;
                        display: flex;
                        align-items: center;
                        justify-content: space-between;
                    }
                    
                    .logo {
                        display: flex;
                        align-items: center;
                        gap: 0.75rem;
                        font-size: 1.25rem;
                        font-weight: 700;
                        color: #1f2937;
                    }
                    
                    .logo svg {
                        width: 32px;
                        height: 32px;
                    }
                    
                    .nav-menu {
                        display: flex;
                        gap: 2rem;
                        list-style: none;
                    }
                    
                    .nav-menu a {
                        color: #4b5563;
                        text-decoration: none;
                        font-weight: 500;
                        transition: color 0.2s;
                        position: relative;
                    }
                    
                    .nav-menu a:hover {
                        color: #6366f1;
                    }
                    
                    .nav-menu a.active {
                        color: #6366f1;
                        font-weight: 600;
                    }
                    
                    .nav-menu a.active::after {
                        content: '';
                        position: absolute;
                        bottom: -16px;
                        left: 50%;
                        transform: translateX(-50%);
                        width: 24px;
                        height: 2px;
                        background: #6366f1;
                    }
                    
                    /* Hero Section */
                    .hero {
                        background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
                        color: white;
                        padding: 4rem 0;
                        text-align: center;
                        position: relative;
                        overflow: hidden;
                    }
                    
                    .hero-content {
                        position: relative;
                        z-index: 1;
                        max-width: 800px;
                        margin: 0 auto;
                        padding: 0 2rem;
                    }
                    
                    .hero h1 {
                        font-size: 3rem;
                        margin-bottom: 1.5rem;
                        font-weight: 700;
                        text-shadow: 0 2px 4px rgba(0,0,0,0.1);
                    }
                    
                    .hero .subtitle {
                        font-size: 1.25rem;
                        opacity: 0.9;
                        font-weight: 400;
                    }
                    
                    /* Main Content */
                    .main-content {
                        flex: 1;
                        background: white;
                        padding: 4rem 0;
                    }
                    
                    .breadcrumb {
                        display: flex;
                        gap: 0.5rem;
                        font-size: 0.875rem;
                        color: #6b7280;
                        margin-bottom: 2rem;
                    }
                    
                    .breadcrumb span {
                        color: #d1d5db;
                    }
                    
                    .breadcrumb a {
                        color: #6b7280;
                        text-decoration: none;
                    }
                    
                    .breadcrumb a:hover {
                        color: #6366f1;
                    }
                    
                    .content-section {
                        margin-bottom: 3rem;
                    }
                    
                    .content-section h2 {
                        font-size: 2rem;
                        font-weight: 600;
                        color: #1f2937;
                        margin-bottom: 1.5rem;
                    }
                    
                    .main-content-text p {
                        font-size: 1.125rem;
                        color: #4b5563;
                        line-height: 1.8;
                        margin-bottom: 1.5rem;
                    }
                    
                    .features-grid {
                        display: grid;
                        grid-template-columns: repeat(auto-fit, minmax(350px, 1fr));
                        gap: 2rem;
                        margin-top: 3rem;
                    }
                    
                    .feature-card {
                        background: #f8fafc;
                        padding: 2rem;
                        border-radius: 12px;
                        border: 1px solid #e2e8f0;
                        transition: all 0.3s ease;
                        position: relative;
                        overflow: hidden;
                    }
                    
                    .feature-card::before {
                        content: '';
                        position: absolute;
                        top: 0;
                        left: 0;
                        right: 0;
                        height: 4px;
                        background: linear-gradient(135deg, #10b981, #059669);
                    }
                    
                    .feature-card:hover {
                        box-shadow: 0 10px 25px rgba(0, 0, 0, 0.1);
                        transform: translateY(-5px);
                    }
                    
                    .feature-card h3 {
                        font-size: 1.25rem;
                        font-weight: 600;
                        color: #1f2937;
                        margin-bottom: 1rem;
                        display: flex;
                        align-items: center;
                        gap: 0.5rem;
                    }
                    
                    .feature-icon {
                        width: 24px;
                        height: 24px;
                        background: #10b981;
                        border-radius: 6px;
                        display: flex;
                        align-items: center;
                        justify-content: center;
                        color: white;
                        font-size: 12px;
                    }
                    
                    .feature-card p {
                        color: #6b7280;
                        line-height: 1.6;
                        font-size: 1rem;
                    }
                    
                    /* Generation Info */
                    .generation-info {
                        background: linear-gradient(135deg, #ede9fe 0%, #e0e7ff 100%);
                        border: 1px solid #c4b5fd;
                        border-radius: 12px;
                        padding: 2rem;
                        margin: 3rem 0;
                    }
                    
                    .generation-info h3 {
                        color: #5b21b6;
                        font-size: 1.25rem;
                        margin-bottom: 1rem;
                    }
                    
                    .info-grid {
                        display: grid;
                        grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
                        gap: 1rem;
                    }
                    
                    .info-item {
                        display: flex;
                        justify-content: space-between;
                        align-items: center;
                        padding: 0.5rem 0;
                        border-bottom: 1px solid rgba(139, 92, 246, 0.2);
                    }
                    
                    .info-item:last-child {
                        border-bottom: none;
                    }
                    
                    .info-item .label {
                        font-weight: 500;
                        color: #6b46c1;
                    }
                    
                    .info-item .value {
                        font-weight: 600;
                        color: #5b21b6;
                    }
                    
                    /* Footer */
                    .footer {
                        background: #1f2937;
                        color: #d1d5db;
                        padding: 3rem 0 2rem;
                        margin-top: auto;
                    }
                    
                    .footer-content {
                        max-width: 1200px;
                        margin: 0 auto;
                        padding: 0 2rem;
                        text-align: center;
                    }
                    
                    .footer p {
                        font-size: 0.875rem;
                        opacity: 0.8;
                    }
                    
                    /* Real Content Indicator */
                    .real-content-indicator {
                        position: fixed;
                        top: 50%;
                        right: 20px;
                        transform: translateY(-50%);
                        background: rgba(16, 185, 129, 0.9);
                        color: white;
                        padding: 12px 16px;
                        border-radius: 50px;
                        font-size: 0.875rem;
                        font-weight: 500;
                        z-index: 1000;
                        backdrop-filter: blur(8px);
                        box-shadow: 0 4px 12px rgba(0,0,0,0.2);
                    }
                </style>
            </head>
            <body>
                <header class="header">
                    <div class="container">
                        <nav class="nav">
                            <div class="logo">
                                <img src="data:image/svg+xml,%3Csvg viewBox='0 0 40 40' xmlns='http://www.w3.org/2000/svg'%3E%3Ccircle cx='20' cy='20' r='18' fill='%23166534' stroke='%23ffffff' stroke-width='2'/%3E%3Ctext x='20' y='25' text-anchor='middle' fill='white' font-size='12' font-weight='bold'%3Eì´í™”%3C/text%3E%3C/svg%3E" alt="ì´í™”ì—¬ëŒ€" style="width: 40px; height: 40px; margin-right: 12px;">
                                ì´í™”ì—¬ìëŒ€í•™êµ ì‚¬íšŒë³µì§€í•™ê³¼
                            </div>
                            <ul class="nav-menu">
                                <li><a href="/about">í•™ê³¼ì†Œê°œ</a></li>
                                <li><a href="/research">í•™ì‚¬ì •ë³´</a></li>
                                <li><a href="/services">ì…í•™ì •ë³´</a></li>
                                <li><a href="/team">í•™ìƒí™œë™</a></li>
                                <li><a href="/portfolio">ìë£Œì‹¤</a></li>
                                <li><a href="/news">ì»¤ë®¤ë‹ˆí‹°</a></li>
                            </ul>
                        </nav>
                    </div>
                </header>
                
                <section class="hero">
                    <div class="container">
                        <h1 class="page-title">${pageTitle}</h1>
                        <p class="page-subtitle">
                            ${contentData.subtitle || 'AIê°€ ì½˜í…ì¸ ë¥¼ ìƒì„±í•˜ê³  ìˆìŠµë‹ˆë‹¤...'}
                        </p>
                    </div>
                </section>
                
                <section class="content">
                    <div class="container">
                        <div class="breadcrumb">
                            <span>ğŸ  í™ˆ</span>
                            <span>â€º</span>
                            <span>í•™ê³¼ì†Œê°œ</span>
                            <span>â€º</span>
                            <span>ì¸ì‚¬ë§</span>
                        </div>
                        <h2>ê°œìš”</h2>
                        ${formatMainContent(contentData.content)}
                        
                        <div class="image-placeholder">
                            <span>Image will be generated here</span>
                        </div>
                        
                        ${contentData.features && contentData.features.length > 0 ? `
                        <div class="grid">
                            ${contentData.features.map(feature => `
                                <div class="card">
                                    <h3>${feature.title}</h3>
                                    <p>${feature.description || feature.desc}</p>
                                </div>
                            `).join('')}
                        </div>
                        ` : `
                        <div class="grid">
                            <div class="card">
                                <h3><span class="placeholder-text">Feature 1</span></h3>
                                <p>
                                    <span class="placeholder-text">Description text</span>
                                    <span class="placeholder-text">will be generated</span>
                                </p>
                            </div>
                            <div class="card">
                                <h3><span class="placeholder-text">Feature 2</span></h3>
                                <p>
                                    <span class="placeholder-text">Description text</span>
                                    <span class="placeholder-text">will be generated</span>
                                </p>
                            </div>
                            <div class="card">
                                <h3><span class="placeholder-text">Feature 3</span></h3>
                                <p>
                                    <span class="placeholder-text">Description text</span>
                                    <span class="placeholder-text">will be generated</span>
                                </p>
                            </div>
                        </div>
                        `}
                    </div>
                </section>
            </body>
            </html>
        `;
        }
        
        // ì´ˆê¸°í™”
        document.addEventListener('DOMContentLoaded', function() {
            console.log('ğŸš€ í…ŒìŠ¤íŠ¸ í˜ì´ì§€ ì´ˆê¸°í™” ì‹œì‘');
            addLog('ğŸš€ í…ŒìŠ¤íŠ¸ í˜ì´ì§€ ì´ˆê¸°í™” ì‹œì‘', 'info');
            
            // ë©”ì¸ ì•± ë°ì´í„° ì´ˆê¸°í™”
            initializeMainAppData();
            
            // ContentStorage ì´ˆê¸°í™”
            try {
                storage = new ContentStorage();
                addLog('âœ… ContentStorage ì´ˆê¸°í™” ì™„ë£Œ', 'success');
            } catch (error) {
                addLog('âŒ ContentStorage ì´ˆê¸°í™” ì‹¤íŒ¨: ' + error.message, 'error');
            }
            
            // ì´ë²¤íŠ¸ ë¦¬ìŠ¤ë„ˆ ì„¤ì •
            document.getElementById('btn-start').addEventListener('click', startSimulation);
            document.getElementById('btn-stop').addEventListener('click', stopSimulation);
            document.getElementById('btn-review').addEventListener('click', enterReviewMode);
            document.getElementById('btn-debug').addEventListener('click', showStorageDebug);
            document.getElementById('btn-clear').addEventListener('click', clearAll);
            
            // ì´ˆê¸° UI ì—…ë°ì´íŠ¸
            updateContentGrid();
            updateStats();
            
            addLog('âœ… ì´ˆê¸°í™” ì™„ë£Œ', 'success');
        });
        
        // ì‹œë®¬ë ˆì´ì…˜ ì‹œì‘
        function startSimulation() {
            console.log('ğŸš€ startSimulation í•¨ìˆ˜ í˜¸ì¶œë¨');
            addLog('ğŸš€ startSimulation í•¨ìˆ˜ í˜¸ì¶œë¨', 'info');
            
            if (simulationInterval) {
                console.log('âš ï¸ ì´ë¯¸ ì‹œë®¬ë ˆì´ì…˜ì´ ì§„í–‰ ì¤‘');
                addLog('ì´ë¯¸ ì‹œë®¬ë ˆì´ì…˜ì´ ì§„í–‰ ì¤‘ì…ë‹ˆë‹¤', 'warning');
                return;
            }
            
            if (!storage) {
                console.error('âŒ Storageê°€ ì´ˆê¸°í™”ë˜ì§€ ì•ŠìŒ');
                addLog('âŒ Storageê°€ ì´ˆê¸°í™”ë˜ì§€ ì•Šì•˜ìŠµë‹ˆë‹¤', 'error');
                return;
            }
            
            console.log('âœ… ì‹œë®¬ë ˆì´ì…˜ ì‹œì‘ ì¡°ê±´ í™•ì¸ ì™„ë£Œ');
            addLog('ğŸš€ ì½˜í…ì¸  ìƒì„± ì‹œë®¬ë ˆì´ì…˜ ì‹œì‘', 'info');
            currentIndex = 0;
            
            const allPages = [];
            menuData.menus.forEach(menu => {
                menu.submenus.forEach(submenu => {
                    allPages.push({ menu, submenu });
                });
            });
            
            console.log(`ğŸ“‹ ì´ ${allPages.length}ê°œ í˜ì´ì§€ ìƒì„± ì˜ˆì •`);
            addLog(`ğŸ“‹ ì´ ${allPages.length}ê°œ í˜ì´ì§€ ìƒì„± ì˜ˆì •`, 'info');
            
            simulationInterval = setInterval(async () => {
                console.log(`ğŸ”„ í˜ì´ì§€ ${currentIndex + 1}/${allPages.length} ì²˜ë¦¬ ì¤‘`);
                
                if (currentIndex >= allPages.length) {
                    stopSimulation();
                    addLog('âœ… ëª¨ë“  í˜ì´ì§€ ìƒì„± ì™„ë£Œ!', 'success');
                    return;
                }
                
                const { menu, submenu } = allPages[currentIndex];
                try {
                    await simulatePageGeneration(menu, submenu);
                    currentIndex++;
                    
                    updateContentGrid();
                    updateStats();
                } catch (error) {
                    console.error('í˜ì´ì§€ ìƒì„± ì˜¤ë¥˜:', error);
                    addLog(`âŒ í˜ì´ì§€ ìƒì„± ì˜¤ë¥˜: ${error.message}`, 'error');
                }
            }, 2000); // 2ì´ˆë§ˆë‹¤ ì‹¤í–‰
        }
        
        // í˜ì´ì§€ ìƒì„± ì‹œë®¬ë ˆì´ì…˜
        async function simulatePageGeneration(menu, submenu) {
            const pageId = `${menu.id}/${submenu.id}`;
            addLog(`ğŸ¨ ìƒì„± ì¤‘: ${menu.koreanTitle} > ${submenu.koreanTitle}`, 'info');
            
            try {
                // ë©”ì¸ ì•±ì˜ ì‹¤ì œ ì½˜í…ì¸  ë°ì´í„° ê°€ì ¸ì˜¤ê¸°
                const realContent = getRealContentData(menu.id, submenu.id);
                
                if (realContent) {
                    // ì´í™”ì—¬ëŒ€ í…œí”Œë¦¿ HTML ìƒì„±
                    const htmlContent = generateEwhaTemplate(menu, submenu, realContent);
                    
                    // ContentStorageì— ì €ì¥
                    const result = storage.storeGeneratedContent(pageId, {
                        title: realContent.title,
                        subtitle: realContent.subtitle,
                        mainContent: realContent.content,
                        features: realContent.features,
                        processingTime: Math.floor(Math.random() * 5) + 2,
                        metadata: {
                            menuId: menu.id,
                            submenuId: submenu.id,
                            pageType: 'generated',
                            generatedAt: new Date().toISOString()
                        }
                    });
                    
                    // ìƒì„±ëœ HTMLì„ ì €ì¥ì†Œì— ì§ì ‘ ì¶”ê°€
                    if (result && storage.generatedContent.has(pageId)) {
                        const savedContent = storage.generatedContent.get(pageId);
                        savedContent.content.htmlContent = htmlContent;
                        storage.generatedContent.set(pageId, savedContent);
                    }
                    
                    // ë¯¸ë¦¬ë³´ê¸° ì—…ë°ì´íŠ¸
                    document.getElementById('preview-frame').srcdoc = htmlContent;
                    
                    addLog(`âœ… ì €ì¥ ì™„ë£Œ: ${menu.koreanTitle} > ${submenu.koreanTitle}`, 'success');
                } else {
                    addLog(`âš ï¸ ì½˜í…ì¸  ë°ì´í„° ì—†ìŒ: ${pageId}`, 'warning');
                }
            } catch (error) {
                console.error('í˜ì´ì§€ ìƒì„± ì˜¤ë¥˜:', error);
                addLog(`âŒ ì €ì¥ ì‹¤íŒ¨: ${pageId} - ${error.message}`, 'error');
            }
        }
        
        // ì‹œë®¬ë ˆì´ì…˜ ì¤‘ì§€
        function stopSimulation() {
            if (simulationInterval) {
                clearInterval(simulationInterval);
                simulationInterval = null;
                addLog('â¹ï¸ ì‹œë®¬ë ˆì´ì…˜ ì¤‘ì§€ë¨', 'warning');
            }
        }
        
        // ëª¨ë‘ ì´ˆê¸°í™”
        function clearAll() {
            stopSimulation();
            if (storage) {
                storage.clearAllContent();
                addLog('ğŸ—‘ï¸ ëª¨ë“  ì½˜í…ì¸  ì‚­ì œë¨', 'warning');
                updateContentGrid();
                updateStats();
            }
        }
        
        // ë¦¬ë·° ëª¨ë“œ ì§„ì…
        function enterReviewMode() {
            addLog('ğŸ‘ï¸ ë¦¬ë·° ëª¨ë“œ í™œì„±í™”', 'info');
            
            // ì €ì¥ëœ ì½˜í…ì¸  í™•ì¸
            let savedCount = 0;
            menuData.menus.forEach(menu => {
                menu.submenus.forEach(submenu => {
                    const pageId = `${menu.id}/${submenu.id}`;
                    const content = storage.getGeneratedContent(pageId);
                    if (content) {
                        savedCount++;
                        addLog(`âœ… ë¦¬ë·° ê°€ëŠ¥: ${menu.koreanTitle} > ${submenu.koreanTitle}`, 'success');
                    }
                });
            });
            
            addLog(`ì´ ${savedCount}ê°œ í˜ì´ì§€ ë¦¬ë·° ê°€ëŠ¥`, 'info');
            
            // ì²« ë²ˆì§¸ ì €ì¥ëœ í˜ì´ì§€ë¥¼ ë¯¸ë¦¬ë³´ê¸°ë¡œ í‘œì‹œ
            if (savedCount > 0) {
                for (const menu of menuData.menus) {
                    for (const submenu of menu.submenus) {
                        const pageId = `${menu.id}/${submenu.id}`;
                        const content = storage.getGeneratedContent(pageId);
                        if (content && content.content && content.content.htmlContent) {
                            document.getElementById('preview-frame').srcdoc = content.content.htmlContent;
                            addLog(`ğŸ” ë¯¸ë¦¬ë³´ê¸°: ${menu.koreanTitle} > ${submenu.koreanTitle}`, 'info');
                            return;
                        }
                    }
                }
            }
        }
        
        // ì½˜í…ì¸  ê·¸ë¦¬ë“œ ì—…ë°ì´íŠ¸
        function updateContentGrid() {
            const grid = document.getElementById('content-grid');
            grid.innerHTML = '';
            
            menuData.menus.forEach(menu => {
                menu.submenus.forEach(submenu => {
                    const pageId = `${menu.id}/${submenu.id}`;
                    const content = storage ? storage.getGeneratedContent(pageId) : null;
                    
                    const card = document.createElement('div');
                    card.className = 'card';
                    
                    const status = content ? 'completed' : 'waiting';
                    const statusText = content ? 'ìƒì„±ë¨' : 'ëŒ€ê¸°ì¤‘';
                    const statusClass = content ? 'completed' : 'waiting';
                    
                    card.innerHTML = `
                        <h3>${menu.koreanTitle} > ${submenu.koreanTitle}</h3>
                        <p>í˜ì´ì§€ ID: ${pageId}</p>
                        <span class="status ${statusClass}">${statusText}</span>
                        ${content ? `<p style="font-size: 0.75rem; color: #059669;">âœ… ì½˜í…ì¸  ì €ì¥ë¨</p>` : ''}
                    `;
                    
                    // í´ë¦­ ì‹œ ë¯¸ë¦¬ë³´ê¸°
                    if (content && content.content && content.content.htmlContent) {
                        card.style.cursor = 'pointer';
                        card.addEventListener('click', () => {
                            document.getElementById('preview-frame').srcdoc = content.content.htmlContent;
                            addLog(`ğŸ” ë¯¸ë¦¬ë³´ê¸°: ${menu.koreanTitle} > ${submenu.koreanTitle}`, 'info');
                        });
                    }
                    
                    grid.appendChild(card);
                });
            });
        }
        
        // í†µê³„ ì—…ë°ì´íŠ¸
        function updateStats() {
            if (!storage) return;
            
            let completedCount = 0;
            let storedCount = 0;
            let reviewableCount = 0;
            
            menuData.menus.forEach(menu => {
                menu.submenus.forEach(submenu => {
                    const pageId = `${menu.id}/${submenu.id}`;
                    const content = storage.getGeneratedContent(pageId);
                    if (content) {
                        completedCount++;
                        storedCount++;
                        if (content.content && (content.content.htmlContent || content.content.title)) {
                            reviewableCount++;
                        }
                    }
                });
            });
            
            document.getElementById('completed-pages').textContent = completedCount;
            document.getElementById('stored-content').textContent = storedCount;
            document.getElementById('reviewable').textContent = reviewableCount;
        }
        
        // ì €ì¥ì†Œ ë””ë²„ê·¸
        function showStorageDebug() {
            if (!storage) {
                addLog('âŒ ì €ì¥ì†Œê°€ ì´ˆê¸°í™”ë˜ì§€ ì•ŠìŒ', 'error');
                return;
            }
            
            addLog('===== ì €ì¥ì†Œ ë””ë²„ê·¸ ì •ë³´ =====', 'info');
            
            const allContent = storage.getAllGeneratedContent();
            addLog(`ì´ ì €ì¥ëœ í˜ì´ì§€: ${allContent.size}ê°œ`, 'info');
            
            allContent.forEach((content, pageId) => {
                addLog(`ğŸ“„ ${pageId}:`, 'info');
                addLog(`  - ì œëª©: ${content.content?.title || 'N/A'}`, 'info');
                addLog(`  - íƒ€ì„ìŠ¤íƒ¬í”„: ${content.timestamp}`, 'info');
                addLog(`  - HTML ì½˜í…ì¸ : ${content.content?.htmlContent ? 'ìˆìŒ' : 'ì—†ìŒ'}`, 'info');
            });
        }
        
        // ë¡œê·¸ ì¶”ê°€
        function addLog(message, type = 'info') {
            const log = document.getElementById('simulation-log');
            const entry = document.createElement('div');
            entry.className = `log-entry ${type}`;
            entry.textContent = `[${new Date().toLocaleTimeString()}] ${message}`;
            log.appendChild(entry);
            log.scrollTop = log.scrollHeight;
        }
    </script>
</body>
</html>