<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>CMS ì—°ë™ í…ŒìŠ¤íŠ¸</title>
    <style>
        body { 
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif; 
            margin: 20px; 
            background: #f5f5f5; 
        }
        .container { 
            max-width: 800px; 
            margin: 0 auto; 
            background: white; 
            padding: 30px; 
            border-radius: 8px; 
            box-shadow: 0 2px 10px rgba(0,0,0,0.1); 
        }
        .test-section { 
            margin-bottom: 30px; 
            padding: 20px; 
            border: 1px solid #e5e7eb; 
            border-radius: 6px; 
        }
        .test-section h2 { 
            color: #374151; 
            margin-top: 0; 
        }
        .button { 
            padding: 10px 20px; 
            background: #6366F1; 
            color: white; 
            border: none; 
            border-radius: 6px; 
            cursor: pointer; 
            margin-right: 10px; 
            margin-bottom: 10px;
        }
        .button:hover { 
            background: #5856EB; 
        }
        .result { 
            margin-top: 15px; 
            padding: 15px; 
            background: #f9fafb; 
            border-radius: 4px; 
            border-left: 4px solid #6366F1; 
            font-family: monospace; 
            font-size: 14px;
            white-space: pre-wrap;
        }
        .success { border-left-color: #10B981; }
        .error { border-left-color: #EF4444; }
        .link { 
            display: block; 
            margin: 20px 0; 
            padding: 15px; 
            background: #EBF8FF; 
            border: 1px solid #BEE3F8; 
            border-radius: 6px; 
            text-decoration: none; 
            color: #2563EB; 
        }
        .link:hover { background: #DBEAFE; }
    </style>
</head>
<body>
    <div class="container">
        <h1>ğŸ§ª CMS ì—°ë™ í…ŒìŠ¤íŠ¸</h1>
        <p>CMS AI ë§ˆë²•ì‚¬ì˜ ë°±ì—”ë“œ ì—°ë™ ê¸°ëŠ¥ì„ í…ŒìŠ¤íŠ¸í•©ë‹ˆë‹¤.</p>
        
        <div class="test-section">
            <h2>1. URL íŒŒë¼ë¯¸í„° í…ŒìŠ¤íŠ¸</h2>
            <p>siteIdë¥¼ URL íŒŒë¼ë¯¸í„°ë¡œ ì „ë‹¬í•˜ì—¬ í…ŒìŠ¤íŠ¸í•©ë‹ˆë‹¤.</p>
            
            <a href="index.html?siteId=test-site-001" class="link">
                ğŸš€ í…ŒìŠ¤íŠ¸ ì‚¬ì´íŠ¸ (test-site-001)ë¡œ ì‹¤í–‰
            </a>
            
            <a href="index.html?siteId=demo-company" class="link">
                ğŸ¢ ë°ëª¨ íšŒì‚¬ (demo-company)ë¡œ ì‹¤í–‰  
            </a>
            
            <a href="index.html" class="link">
                ğŸ”§ ê¸°ë³¸ ëª¨ë“œ (default-site)ë¡œ ì‹¤í–‰
            </a>
        </div>
        
        <div class="test-section">
            <h2>2. CMS API ëª¨ì˜ í…ŒìŠ¤íŠ¸</h2>
            <p>ì‹¤ì œ CMS API ì—†ì´ í´ë¼ì´ì–¸íŠ¸ë‹¨ì—ì„œ ëª¨ì˜ í…ŒìŠ¤íŠ¸ë¥¼ ì§„í–‰í•©ë‹ˆë‹¤.</p>
            
            <button class="button" onclick="testCMSIntegration()">CMS ì—°ë™ í…ŒìŠ¤íŠ¸</button>
            <button class="button" onclick="testMenuLoading()">ë©”ë‰´ ë¡œë”© í…ŒìŠ¤íŠ¸</button>
            <button class="button" onclick="testPageLoading()">í˜ì´ì§€ ë¡œë”© í…ŒìŠ¤íŠ¸</button>
            <button class="button" onclick="testContentSaving()">ì½˜í…ì¸  ì €ì¥ í…ŒìŠ¤íŠ¸</button>
            <button class="button" onclick="previewGeneratedPage()">HTML ë¯¸ë¦¬ë³´ê¸°</button>
            
            <div id="testResult" class="result" style="display: none;"></div>
            
            <!-- HTML ë¯¸ë¦¬ë³´ê¸° ì„¹ì…˜ -->
            <div id="htmlPreviewSection" style="display: none; margin-top: 20px;">
                <h3>ğŸ” ìƒì„±ëœ HTML ë¯¸ë¦¬ë³´ê¸°</h3>
                <div style="display: flex; gap: 20px; margin-top: 15px;">
                    <!-- ì†ŒìŠ¤ì½”ë“œ í‘œì‹œ -->
                    <div style="flex: 1;">
                        <h4>HTML ì†ŒìŠ¤ì½”ë“œ</h4>
                        <pre id="htmlSourceCode" style="background: #f8f9fa; padding: 15px; border-radius: 6px; font-size: 12px; max-height: 300px; overflow-y: auto; border: 1px solid #e5e7eb;"></pre>
                    </div>
                    <!-- ë¯¸ë¦¬ë³´ê¸° iframe -->
                    <div style="flex: 1;">
                        <h4>ì‹¤ì œ ë Œë”ë§ ê²°ê³¼</h4>
                        <iframe id="htmlPreviewFrame" style="width: 100%; height: 300px; border: 1px solid #e5e7eb; border-radius: 6px;" frameborder="0"></iframe>
                    </div>
                </div>
            </div>
        </div>
        
        <div class="test-section">
            <h2>3. í´ë°± ëª¨ë“œ í…ŒìŠ¤íŠ¸</h2>
            <p>CMS ì„œë²„ ì—°ê²° ì‹¤íŒ¨ ì‹œ í´ë°± ëª¨ë“œê°€ ì •ìƒ ì‘ë™í•˜ëŠ”ì§€ í™•ì¸í•©ë‹ˆë‹¤.</p>
            
            <button class="button" onclick="testFallbackMode()">í´ë°± ëª¨ë“œ í…ŒìŠ¤íŠ¸</button>
            
            <div id="fallbackResult" class="result" style="display: none;"></div>
        </div>
        
        <div class="test-section">
            <h2>4. ì‹œìŠ¤í…œ ì •ë³´</h2>
            <p>í˜„ì¬ ë¸Œë¼ìš°ì € ë° ì‹œìŠ¤í…œ ì •ë³´ë¥¼ í™•ì¸í•©ë‹ˆë‹¤.</p>
            
            <button class="button" onclick="showSystemInfo()">ì‹œìŠ¤í…œ ì •ë³´ ë³´ê¸°</button>
            
            <div id="systemInfo" class="result" style="display: none;"></div>
        </div>
        
        <div class="test-section">
            <h2>5. ê°œë°œì ì½˜ì†” & ì‹¤ì‹œê°„ ë¡œê·¸</h2>
            <p>ë¸Œë¼ìš°ì € ê°œë°œì ë„êµ¬ì˜ ì½˜ì†”ì—ì„œ ìƒì„¸í•œ ë¡œê·¸ë¥¼ í™•ì¸í•˜ê±°ë‚˜, ì•„ë˜ ì‹¤ì‹œê°„ ë¡œê·¸ ëª¨ë‹ˆí„°ë¥¼ ì‚¬ìš©í•˜ì„¸ìš”.</p>
            
            <button class="button" onclick="toggleLogMonitor()">ì‹¤ì‹œê°„ ë¡œê·¸ ëª¨ë‹ˆí„° í† ê¸€</button>
            <button class="button" onclick="clearLogMonitor()">ë¡œê·¸ ì§€ìš°ê¸°</button>
            <button class="button" onclick="exportLogs()">ë¡œê·¸ ë‚´ë³´ë‚´ê¸°</button>
            
            <!-- ì‹¤ì‹œê°„ ë¡œê·¸ ëª¨ë‹ˆí„° -->
            <div id="logMonitor" style="display: none; margin-top: 20px; background: #1f2937; color: #e5e7eb; padding: 20px; border-radius: 8px; font-family: 'Courier New', monospace; font-size: 13px; max-height: 400px; overflow-y: auto;">
                <div id="logContent">
                    <div class="log-entry">ğŸš€ <span style="color: #10b981;">[SYSTEM]</span> ë¡œê·¸ ëª¨ë‹ˆí„° ì‹œì‘ë¨ - <span style="color: #6b7280;">[ì‹œì‘ ì‹œê°„]</span></div>
                </div>
            </div>
            
            <div style="background: #f3f4f6; padding: 15px; border-radius: 6px; margin-top: 15px;">
                <strong>ì£¼ìš” ë¡œê·¸ ë©”ì‹œì§€:</strong><br>
                ğŸ”— <span style="color: #6366f1;">[CMS]</span> ì—°ê²° ì´ˆê¸°í™” ì¤‘...<br>
                ğŸ“‹ <span style="color: #059669;">[MENU]</span> ë©”ë‰´ êµ¬ì¡° ì¡°íšŒ ì¤‘...<br>
                ğŸ“„ <span style="color: #7c3aed;">[PAGE]</span> í˜ì´ì§€ HTML ì¡°íšŒ ì¤‘...<br>
                ğŸ’¾ <span style="color: #dc2626;">[SAVE]</span> ì½˜í…ì¸  ì €ì¥ ì¤‘...<br>
                âœ… <span style="color: #10b981;">[SUCCESS]</span> ì‘ì—… ì™„ë£Œ / âŒ <span style="color: #ef4444;">[ERROR]</span> ì˜¤ë¥˜ ë°œìƒ
            </div>
            
            <p style="margin-top: 15px;"><kbd>F12</kbd> â†’ Console íƒ­ì—ì„œë„ ë™ì¼í•œ ë¡œê·¸ë¥¼ í™•ì¸í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.</p>
        </div>
        
        <div class="test-section">
            <h2>6. ë°ëª¨ í˜ì´ì§€</h2>
            <p>ë‹¤ì–‘í•œ CMS í…œí”Œë¦¿ êµ¬ì¡°ì™€ #cms-content ì˜ì—­ì„ ì‹œê°ì ìœ¼ë¡œ í™•ì¸í•´ë³´ì„¸ìš”.</p>
            
            <a href="demo-page.html" class="link" target="_blank">
                ğŸ¨ CMS í…œí”Œë¦¿ ë°ëª¨ í˜ì´ì§€ ë³´ê¸°
            </a>
            
            <div style="background: #ecfdf5; padding: 15px; border-radius: 6px; margin-top: 15px; border-left: 4px solid #10b981;">
                <strong>í¬í•¨ëœ í…œí”Œë¦¿:</strong><br>
                ğŸ¢ ê¸°ì—…í˜• í…œí”Œë¦¿ - ì „ë¬¸ì ì¸ ë¹„ì¦ˆë‹ˆìŠ¤ ë ˆì´ì•„ì›ƒ<br>
                ğŸ“ ë¸”ë¡œê·¸í˜• í…œí”Œë¦¿ - ì½˜í…ì¸  ì¤‘ì‹¬ì˜ ê°œì¸ ë¸”ë¡œê·¸<br>
                ğŸ›’ ì‡¼í•‘ëª°í˜• í…œí”Œë¦¿ - ì „ììƒê±°ë˜ ì‚¬ì´íŠ¸<br>
                ğŸ¯ í¬íŠ¸í´ë¦¬ì˜¤í˜• í…œí”Œë¦¿ - ê°œì¸ ì‘í’ˆ ì†Œê°œ ì‚¬ì´íŠ¸
            </div>
        </div>
    </div>

    <script>
        // CMS Integration í…ŒìŠ¤íŠ¸ ìŠ¤í¬ë¦½íŠ¸
        async function testCMSIntegration() {
            const resultDiv = document.getElementById('testResult');
            resultDiv.style.display = 'block';
            resultDiv.className = 'result';
            resultDiv.textContent = 'í…ŒìŠ¤íŠ¸ ì§„í–‰ì¤‘...';
            
            try {
                // CMS Integration ì¸ìŠ¤í„´ìŠ¤ ìƒì„± í…ŒìŠ¤íŠ¸
                const cms = new CMSIntegration('test-site');
                
                // ì´ˆê¸°í™” í…ŒìŠ¤íŠ¸
                const initResult = await cms.initialize();
                
                resultDiv.textContent = `CMS ì—°ë™ í…ŒìŠ¤íŠ¸ ê²°ê³¼:
ëª¨ë“œ: ${initResult.mode}
ì„±ê³µ: ${initResult.success}
${initResult.error ? 'ì˜¤ë¥˜: ' + initResult.error : ''}

í´ë°± ëª¨ë“œ: ${cms.isFallbackMode()}
ì—°ê²° ìƒíƒœ: ${cms.isConnectionActive()}`;
                
                resultDiv.className = 'result ' + (initResult.success ? 'success' : 'error');
                
            } catch (error) {
                resultDiv.textContent = `í…ŒìŠ¤íŠ¸ ì‹¤íŒ¨: ${error.message}`;
                resultDiv.className = 'result error';
            }
        }
        
        async function testMenuLoading() {
            const resultDiv = document.getElementById('testResult');
            resultDiv.style.display = 'block';
            resultDiv.className = 'result';
            resultDiv.textContent = 'ë©”ë‰´ ë¡œë”© í…ŒìŠ¤íŠ¸ ì¤‘...';
            
            try {
                const cms = new CMSIntegration('test-site');
                await cms.initialize();
                
                const menuData = await cms.loadMenuStructure();
                
                resultDiv.textContent = `ë©”ë‰´ ë¡œë”© í…ŒìŠ¤íŠ¸ ê²°ê³¼:
ì´ ë©”ë‰´ ìˆ˜: ${menuData.menus.length}
ì²« ë²ˆì§¸ ë©”ë‰´: ${menuData.menus[0]?.title} (${menuData.menus[0]?.koreanTitle})
ì„œë¸Œë©”ë‰´ ìˆ˜: ${menuData.menus[0]?.submenus?.length || 0}

í´ë°± ëª¨ë“œ: ${cms.isFallbackMode()}`;
                
                resultDiv.className = 'result success';
                
            } catch (error) {
                resultDiv.textContent = `ë©”ë‰´ ë¡œë”© ì‹¤íŒ¨: ${error.message}`;
                resultDiv.className = 'result error';
            }
        }
        
        async function testPageLoading() {
            const resultDiv = document.getElementById('testResult');
            resultDiv.style.display = 'block';
            resultDiv.className = 'result';
            resultDiv.textContent = 'í˜ì´ì§€ ë¡œë”© í…ŒìŠ¤íŠ¸ ì¤‘...';
            
            try {
                const cms = new CMSIntegration('test-site');
                await cms.initialize();
                
                const pageData = await cms.loadPageHTML('about/welcome');
                
                resultDiv.textContent = `í˜ì´ì§€ ë¡œë”© í…ŒìŠ¤íŠ¸ ê²°ê³¼:
í˜ì´ì§€ ID: ${pageData.pageId}
HTML ê¸¸ì´: ${pageData.fullHtml.length} ë¬¸ì
ì½˜í…ì¸  ì…€ë ‰í„°: ${pageData.contentSelector}
í˜ì´ì§€ ì œëª©: ${pageData.pageTitle}

#cms-content í¬í•¨: ${pageData.fullHtml.includes('cms-content')}
í´ë°± ëª¨ë“œ: ${cms.isFallbackMode()}`;
                
                resultDiv.className = 'result success';
                
            } catch (error) {
                resultDiv.textContent = `í˜ì´ì§€ ë¡œë”© ì‹¤íŒ¨: ${error.message}`;
                resultDiv.className = 'result error';
            }
        }
        
        async function testContentSaving() {
            const resultDiv = document.getElementById('testResult');
            resultDiv.style.display = 'block';
            resultDiv.className = 'result';
            resultDiv.textContent = 'ì½˜í…ì¸  ì €ì¥ í…ŒìŠ¤íŠ¸ ì¤‘...';
            
            try {
                const cms = new CMSIntegration('test-site');
                await cms.initialize();
                
                const testContent = '<div><h1>AI ìƒì„± í…ŒìŠ¤íŠ¸ ì½˜í…ì¸ </h1><p>ì €ì¥ í…ŒìŠ¤íŠ¸ì…ë‹ˆë‹¤.</p></div>';
                const saveResult = await cms.saveGeneratedContent('about/welcome', testContent);
                
                resultDiv.textContent = `ì½˜í…ì¸  ì €ì¥ í…ŒìŠ¤íŠ¸ ê²°ê³¼:
ì„±ê³µ: ${saveResult.success}
ì €ì¥ ì‹œê°„: ${saveResult.savedAt}
ëª¨ë“œ: ${saveResult.mode}
${saveResult.error ? 'ì˜¤ë¥˜: ' + saveResult.error : ''}

í´ë°± ëª¨ë“œ: ${cms.isFallbackMode()}`;
                
                resultDiv.className = 'result ' + (saveResult.success ? 'success' : 'error');
                
            } catch (error) {
                resultDiv.textContent = `ì½˜í…ì¸  ì €ì¥ ì‹¤íŒ¨: ${error.message}`;
                resultDiv.className = 'result error';
            }
        }
        
        async function testFallbackMode() {
            const resultDiv = document.getElementById('fallbackResult');
            resultDiv.style.display = 'block';
            resultDiv.className = 'result';
            resultDiv.textContent = 'í´ë°± ëª¨ë“œ í…ŒìŠ¤íŠ¸ ì¤‘...';
            
            try {
                // ê°•ì œë¡œ í´ë°± ëª¨ë“œ ì„¤ì •
                const cms = new CMSIntegration('test-site');
                cms.fallbackMode = true;
                
                const menuData = await cms.loadMenuStructure();
                const pageData = await cms.loadPageHTML('about/welcome');
                const saveResult = await cms.saveGeneratedContent('about/welcome', '<div>Test</div>');
                
                resultDiv.textContent = `í´ë°± ëª¨ë“œ í…ŒìŠ¤íŠ¸ ê²°ê³¼:
ë©”ë‰´ ë¡œë”©: ${menuData.menus.length}ê°œ ë©”ë‰´ (ê¸°ë³¸ê°’)
í˜ì´ì§€ ë¡œë”©: ${pageData.fullHtml.length}ì HTML (ê¸°ë³¸ê°’)
ì½˜í…ì¸  ì €ì¥: ${saveResult.success} (${saveResult.mode})

ëª¨ë“  ê¸°ëŠ¥ì´ í´ë°± ëª¨ë“œì—ì„œ ì •ìƒ ì‘ë™í•¨`;
                
                resultDiv.className = 'result success';
                
            } catch (error) {
                resultDiv.textContent = `í´ë°± ëª¨ë“œ í…ŒìŠ¤íŠ¸ ì‹¤íŒ¨: ${error.message}`;
                resultDiv.className = 'result error';
            }
        }
        
        async function previewGeneratedPage() {
            try {
                const cms = new CMSIntegration('test-site');
                await cms.initialize();
                
                const pageData = await cms.loadPageHTML('about/welcome');
                
                // HTML ì†ŒìŠ¤ì½”ë“œ í‘œì‹œ
                const sourceCodeDiv = document.getElementById('htmlSourceCode');
                sourceCodeDiv.textContent = pageData.fullHtml;
                
                // iframeì— HTML ë Œë”ë§
                const previewFrame = document.getElementById('htmlPreviewFrame');
                const doc = previewFrame.contentDocument || previewFrame.contentWindow.document;
                doc.open();
                doc.write(pageData.fullHtml);
                doc.close();
                
                // ë¯¸ë¦¬ë³´ê¸° ì„¹ì…˜ í‘œì‹œ
                const previewSection = document.getElementById('htmlPreviewSection');
                previewSection.style.display = 'block';
                
                // ìŠ¤í¬ë¡¤í•˜ì—¬ ë¯¸ë¦¬ë³´ê¸° ì„¹ì…˜ìœ¼ë¡œ ì´ë™
                previewSection.scrollIntoView({ behavior: 'smooth' });
                
                console.log('âœ… HTML ë¯¸ë¦¬ë³´ê¸° ìƒì„± ì™„ë£Œ');
                
            } catch (error) {
                console.error('âŒ HTML ë¯¸ë¦¬ë³´ê¸° ìƒì„± ì‹¤íŒ¨:', error);
                alert('HTML ë¯¸ë¦¬ë³´ê¸° ìƒì„±ì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤: ' + error.message);
            }
        }
        
        function showSystemInfo() {
            const resultDiv = document.getElementById('systemInfo');
            resultDiv.style.display = 'block';
            resultDiv.className = 'result';
            
            const info = {
                userAgent: navigator.userAgent,
                language: navigator.language,
                platform: navigator.platform,
                cookieEnabled: navigator.cookieEnabled,
                onLine: navigator.onLine,
                screenResolution: screen.width + 'x' + screen.height,
                windowSize: window.innerWidth + 'x' + window.innerHeight,
                timeZone: Intl.DateTimeFormat().resolvedOptions().timeZone,
                currentTime: new Date().toLocaleString(),
                url: window.location.href,
                protocol: window.location.protocol,
                host: window.location.host
            };
            
            resultDiv.textContent = `ì‹œìŠ¤í…œ ì •ë³´:
ë¸Œë¼ìš°ì €: ${info.userAgent.split(' ').pop() || 'Unknown'}
ì–¸ì–´: ${info.language}
í”Œë«í¼: ${info.platform}
ì¿ í‚¤ ì‚¬ìš©: ${info.cookieEnabled}
ì¸í„°ë„· ì—°ê²°: ${info.onLine}
í™”ë©´ í•´ìƒë„: ${info.screenResolution}
ì°½ í¬ê¸°: ${info.windowSize}
ì‹œê°„ëŒ€: ${info.timeZone}
í˜„ì¬ ì‹œê°„: ${info.currentTime}
URL: ${info.url}
í”„ë¡œí† ì½œ: ${info.protocol}
í˜¸ìŠ¤íŠ¸: ${info.host}

CMS ì—°ë™ ì¤€ë¹„ ìƒíƒœ: âœ…
JavaScript ì§€ì›: âœ…
ë¡œì»¬ ìŠ¤í† ë¦¬ì§€: ${typeof(Storage) !== "undefined" ? 'âœ…' : 'âŒ'}`;
            
            resultDiv.className = 'result success';
        }
        
        // ë¡œê·¸ ëª¨ë‹ˆí„°ë§ ì‹œìŠ¤í…œ
        let logMonitorVisible = false;
        let logEntries = [];
        
        function addLogEntry(level, category, message) {
            const timestamp = new Date().toLocaleString();
            const colors = {
                'SYSTEM': '#10b981',
                'CMS': '#6366f1',
                'MENU': '#059669',
                'PAGE': '#7c3aed',
                'SAVE': '#dc2626',
                'SUCCESS': '#10b981',
                'ERROR': '#ef4444',
                'INFO': '#3b82f6',
                'WARN': '#f59e0b'
            };
            
            const entry = {
                timestamp,
                level,
                category,
                message,
                color: colors[category] || '#6b7280'
            };
            
            logEntries.push(entry);
            
            // ë¡œê·¸ í¬ê¸° ì œí•œ (ë©”ëª¨ë¦¬ ì ˆì•½)
            if (logEntries.length > 100) {
                logEntries.shift(); // ê°€ì¥ ì˜¤ë˜ëœ ë¡œê·¸ ì œê±°
            }
            
            // ì›ë³¸ ì½˜ì†”ì—ë§Œ ì¶œë ¥ (ë¬´í•œ ë£¨í”„ ë°©ì§€)
            const consoleMessage = `[${category}] ${message}`;
            if (level === 'error') {
                originalConsoleError(consoleMessage);
            } else if (level === 'warn') {
                originalConsoleWarn(consoleMessage);
            } else {
                originalConsoleLog(consoleMessage);
            }
            
            // UI ì—…ë°ì´íŠ¸ (ë¡œê·¸ ëª¨ë‹ˆí„°ê°€ ë³´ì´ëŠ” ê²½ìš°)
            if (logMonitorVisible) {
                updateLogDisplay();
            }
        }
        
        function toggleLogMonitor() {
            const monitor = document.getElementById('logMonitor');
            logMonitorVisible = !logMonitorVisible;
            
            if (logMonitorVisible) {
                monitor.style.display = 'block';
                updateLogDisplay();
                addLogEntry('info', 'SYSTEM', 'ì‹¤ì‹œê°„ ë¡œê·¸ ëª¨ë‹ˆí„° í™œì„±í™”ë¨');
            } else {
                monitor.style.display = 'none';
                addLogEntry('info', 'SYSTEM', 'ì‹¤ì‹œê°„ ë¡œê·¸ ëª¨ë‹ˆí„° ë¹„í™œì„±í™”ë¨');
            }
        }
        
        function clearLogMonitor() {
            logEntries = [];
            updateLogDisplay();
            addLogEntry('info', 'SYSTEM', 'ë¡œê·¸ ê¸°ë¡ì´ ì§€ì›Œì¡ŒìŠµë‹ˆë‹¤');
        }
        
        function exportLogs() {
            const logText = logEntries.map(entry => 
                `[${entry.timestamp}] [${entry.category}] ${entry.message}`
            ).join('\n');
            
            const blob = new Blob([logText], { type: 'text/plain' });
            const url = URL.createObjectURL(blob);
            const a = document.createElement('a');
            a.href = url;
            a.download = `cms-test-logs-${new Date().toISOString().split('T')[0]}.txt`;
            document.body.appendChild(a);
            a.click();
            document.body.removeChild(a);
            URL.revokeObjectURL(url);
            
            addLogEntry('info', 'SYSTEM', 'ë¡œê·¸ê°€ íŒŒì¼ë¡œ ë‚´ë³´ë‚´ì¡ŒìŠµë‹ˆë‹¤');
        }
        
        function updateLogDisplay() {
            const logContent = document.getElementById('logContent');
            logContent.innerHTML = logEntries.map(entry => 
                `<div class="log-entry">${getLogIcon(entry.category)} <span style="color: ${entry.color};">[${entry.category}]</span> ${entry.message} <span style="color: #6b7280;">- ${entry.timestamp}</span></div>`
            ).join('');
            
            // ìŠ¤í¬ë¡¤ì„ ë§¨ ì•„ë˜ë¡œ
            const monitor = document.getElementById('logMonitor');
            monitor.scrollTop = monitor.scrollHeight;
        }
        
        function getLogIcon(category) {
            const icons = {
                'SYSTEM': 'ğŸš€',
                'CMS': 'ğŸ”—',
                'MENU': 'ğŸ“‹',
                'PAGE': 'ğŸ“„',
                'SAVE': 'ğŸ’¾',
                'SUCCESS': 'âœ…',
                'ERROR': 'âŒ',
                'INFO': 'â„¹ï¸',
                'WARN': 'âš ï¸'
            };
            return icons[category] || 'ğŸ“';
        }
        
        // ì›ë³¸ ì½˜ì†” í•¨ìˆ˜ë“¤ ì €ì¥ (ë¬´í•œ ë£¨í”„ ë°©ì§€)
        const originalConsoleLog = console.log;
        const originalConsoleWarn = console.warn;
        const originalConsoleError = console.error;
        
        let isLoggingInProgress = false; // ë¬´í•œ ë£¨í”„ ë°©ì§€ í”Œë˜ê·¸
        
        console.log = function(...args) {
            originalConsoleLog.apply(console, args);
            
            // ë¬´í•œ ë£¨í”„ ë°©ì§€: ì´ë¯¸ ë¡œê¹… ì¤‘ì´ê±°ë‚˜, ë‚´ë¶€ ë¡œê·¸ ë©”ì‹œì§€ëŠ” ë¬´ì‹œ
            if (isLoggingInProgress) return;
            
            const message = args.join(' ');
            
            // ë¡œê·¸ ì‹œìŠ¤í…œ ìì²´ì˜ ë©”ì‹œì§€ëŠ” ë¬´ì‹œ
            if (message.includes('[CMS]') || message.includes('[SYSTEM]') || 
                message.includes('[MENU]') || message.includes('[PAGE]')) {
                return;
            }
            
            // CMS ê´€ë ¨ ë©”ì‹œì§€ë§Œ ë¡œê·¸ ëª¨ë‹ˆí„°ì— ì¶”ê°€
            if (message.includes('CMS') || message.includes('ë©”ë‰´') || message.includes('í˜ì´ì§€')) {
                const category = message.includes('CMS') ? 'CMS' : 
                               message.includes('ë©”ë‰´') ? 'MENU' : 
                               message.includes('í˜ì´ì§€') ? 'PAGE' : 'INFO';
                
                isLoggingInProgress = true;
                addLogEntry('info', category, message);
                isLoggingInProgress = false;
            }
        };
        
        console.warn = function(...args) {
            originalConsoleWarn.apply(console, args);
            if (!isLoggingInProgress) {
                isLoggingInProgress = true;
                addLogEntry('warn', 'WARN', args.join(' '));
                isLoggingInProgress = false;
            }
        };
        
        console.error = function(...args) {
            originalConsoleError.apply(console, args);
            if (!isLoggingInProgress) {
                isLoggingInProgress = true;
                addLogEntry('error', 'ERROR', args.join(' '));
                isLoggingInProgress = false;
            }
        };
        
        // í˜ì´ì§€ ë¡œë“œ ì‹œ ì´ˆê¸° ë¡œê·¸
        window.addEventListener('load', function() {
            addLogEntry('info', 'SYSTEM', 'CMS í…ŒìŠ¤íŠ¸ í˜ì´ì§€ ë¡œë“œ ì™„ë£Œ');
            addLogEntry('info', 'SYSTEM', 'ëª¨ë“  í…ŒìŠ¤íŠ¸ ê¸°ëŠ¥ì´ ì¤€ë¹„ë˜ì—ˆìŠµë‹ˆë‹¤');
        });
    </script>
    
    <!-- CMS Integration ìŠ¤í¬ë¦½íŠ¸ ë¡œë“œ -->
    <script>
        // CMSIntegration í´ë˜ìŠ¤ ì¸ë¼ì¸ ì •ì˜ (í…ŒìŠ¤íŠ¸ìš©)
        class CMSIntegration {
            constructor(siteId) {
                this.siteId = siteId;
                this.apiBase = '/api/cms';
                this.isConnected = false;
                this.fallbackMode = false;
            }
            
            async initialize() {
                try {
                    console.log('ğŸ”— CMS ì—°ê²° ì´ˆê¸°í™” ì¤‘...', this.siteId);
                    
                    // ì‹¤ì œ API í˜¸ì¶œ ì‹œë®¬ë ˆì´ì…˜ (í•­ìƒ ì‹¤íŒ¨ë¡œ ì„¤ì •í•˜ì—¬ í´ë°± ëª¨ë“œ í…ŒìŠ¤íŠ¸)
                    throw new Error('CMS ì„œë²„ì— ì—°ê²°í•  ìˆ˜ ì—†ìŠµë‹ˆë‹¤ (í…ŒìŠ¤íŠ¸ìš©)');
                    
                } catch (error) {
                    console.warn('âš ï¸ CMS ì—°ê²° ì‹¤íŒ¨, í´ë°± ëª¨ë“œë¡œ ì „í™˜:', error.message);
                    this.fallbackMode = true;
                    return { success: false, mode: 'fallback', error: error.message };
                }
            }
            
            async loadMenuStructure() {
                if (this.fallbackMode) {
                    console.log('ğŸ“‹ í´ë°± ëª¨ë“œ: ê¸°ë³¸ ë©”ë‰´ êµ¬ì¡° ì‚¬ìš©');
                    return this.getDefaultMenuStructure();
                }
                
                // ì‹¤ì œ API í˜¸ì¶œ ì½”ë“œëŠ” ì—¬ê¸°ì—...
                return this.getDefaultMenuStructure();
            }
            
            async loadPageHTML(pageId) {
                if (this.fallbackMode) {
                    console.log('ğŸ“„ í´ë°± ëª¨ë“œ: ê¸°ë³¸ í˜ì´ì§€ êµ¬ì¡° ë°˜í™˜');
                    return this.getDefaultPageStructure(pageId);
                }
                
                // ì‹¤ì œ API í˜¸ì¶œ ì½”ë“œëŠ” ì—¬ê¸°ì—...
                return this.getDefaultPageStructure(pageId);
            }
            
            async saveGeneratedContent(pageId, htmlContent) {
                if (this.fallbackMode) {
                    console.log('ğŸ’¾ í´ë°± ëª¨ë“œ: ì½˜í…ì¸  ì €ì¥ ì‹œë®¬ë ˆì´ì…˜');
                    await new Promise(resolve => setTimeout(resolve, 1000));
                    return { 
                        success: true, 
                        savedAt: new Date().toISOString(),
                        mode: 'simulation' 
                    };
                }
                
                // ì‹¤ì œ API í˜¸ì¶œ ì½”ë“œëŠ” ì—¬ê¸°ì—...
                return { success: true, savedAt: new Date().toISOString(), mode: 'cms' };
            }
            
            getDefaultMenuStructure() {
                return {
                    menus: [
                        {
                            id: "about",
                            title: "About",
                            koreanTitle: "íšŒì‚¬ì†Œê°œ",
                            icon: "â—‹",
                            status: "waiting",
                            submenus: [
                                {
                                    id: "welcome",
                                    title: "Welcome Message",
                                    koreanTitle: "í™˜ì˜ë©”ì‹œì§€",
                                    status: "waiting",
                                    url: "/about/welcome"
                                }
                            ]
                        }
                    ]
                };
            }
            
            getDefaultPageStructure(pageId) {
                // ì‹¤ì œ ì´í™”ì—¬ëŒ€ CMS í…œí”Œë¦¿ êµ¬ì¡° ì‚¬ìš©
                return {
                    pageId: pageId,
                    fullHtml: this.getEwhaCMSTemplate(),
                    contentSelector: '#cms-content',
                    pageTitle: 'ì¸ì‚¬ë§ - ì‚¬íšŒë³µì§€í•™ê³¼ (' + pageId + ')',
                    menuPath: ['í•™ê³¼ì†Œê°œ', 'ì¸ì‚¬ë§']
                };
            }
            
            getEwhaCMSTemplate() {
                // ì´í™”ì—¬ëŒ€ ì‹¤ì œ CMS í…œí”Œë¦¿ HTML ë°˜í™˜
                return `<!doctype html>
<html lang="ko" class="no-js">
<head>
<title>ì¸ì‚¬ë§ | í…œí”Œë¦¿01</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta http-equiv="X-UA-Compatible" content="IE=edge" />
<meta name="viewport" content="width=device-width,initial-scale=1.0,minimum-scale=1.0,maximum-scale=1.0,user-scalable=yes">
<style>
/* ê¸°ë³¸ ìŠ¤íƒ€ì¼ */
* { margin: 0; padding: 0; box-sizing: border-box; }
body { font-family: 'Malgun Gothic', sans-serif; line-height: 1.6; color: #333; }
.wrap { min-height: 100vh; display: flex; flex-direction: column; }

/* í—¤ë” ìŠ¤íƒ€ì¼ */
header { background: #fff; box-shadow: 0 2px 10px rgba(0,0,0,0.1); }
.top-header-box { background: #f8f9fa; padding: 8px 0; }
.top-util-box ul { list-style: none; display: flex; justify-content: flex-end; max-width: 1200px; margin: 0 auto; padding: 0 20px; }
.top-util-box li { margin-left: 20px; }
.top-util-box a { color: #666; text-decoration: none; font-size: 13px; }

.bottom-header-box { max-width: 1200px; margin: 0 auto; padding: 15px 20px; display: flex; align-items: center; justify-content: space-between; }
.logo { font-size: 1.5rem; font-weight: bold; }
.logo a { color: #2c5282; text-decoration: none; }
.logo span { color: #e53e3e; }

.gnb-ul { list-style: none; display: flex; gap: 40px; }
.gnb-ul > li > a { color: #333; text-decoration: none; font-weight: 500; padding: 10px 0; display: block; }
.gnb-ul > li > a.active { color: #2c5282; font-weight: bold; }

/* ì„œë¸Œ ë¹„ì£¼ì–¼ */
.sub-visual-box { background: linear-gradient(135deg, #2c5282 0%, #2d3748 100%); color: white; padding: 60px 0; text-align: center; }
.sub-visual-box h2 { font-size: 2.5rem; margin-bottom: 20px; }
.path-depth-wrap { display: flex; justify-content: center; align-items: center; gap: 10px; }
.path-depth-wrap ul { list-style: none; display: flex; gap: 10px; align-items: center; }
.path-depth-wrap a { color: rgba(255,255,255,0.8); text-decoration: none; }
.path-home { margin-right: 10px; }

/* ë©”ì¸ ì»¨í…ì¸  */
.sub-container { flex: 1; max-width: 1200px; margin: 0 auto; padding: 40px 20px; }
.page-title h3 { font-size: 2rem; color: #2c5282; margin-bottom: 30px; padding-bottom: 15px; border-bottom: 3px solid #2c5282; }

/* CMS ì½˜í…ì¸  ì˜ì—­ ê°•ì¡° */
#cms-content { 
    background: linear-gradient(135deg, #fef9e7, #fef3c7); 
    border: 3px dashed #f59e0b; 
    border-radius: 15px; 
    padding: 40px; 
    margin: 30px 0; 
    position: relative;
    min-height: 300px;
}

#cms-content::before {
    content: "ğŸ¯ AIê°€ ìƒì„±í•  ì½˜í…ì¸  ì˜ì—­";
    position: absolute;
    top: -15px;
    left: 20px;
    background: #f59e0b;
    color: white;
    padding: 5px 15px;
    border-radius: 20px;
    font-size: 14px;
    font-weight: bold;
}

.cms-placeholder {
    text-align: center;
    color: #92400e;
    font-size: 1.2rem;
    font-weight: 500;
    padding: 50px 20px;
}

/* í‘¸í„° */
footer { background: #2d3748; color: white; padding: 40px 0; margin-top: auto; }
.bottom-footer-box { max-width: 1200px; margin: 0 auto; padding: 0 20px; display: flex; align-items: center; justify-content: space-between; }
.footer-info-box { flex: 1; margin-left: 30px; }
.footer-util-box ul { list-style: none; display: flex; gap: 20px; margin-bottom: 15px; }
.footer-util-box a { color: rgba(255,255,255,0.8); text-decoration: none; font-size: 14px; }
.address-txt { margin-bottom: 10px; }
.copyright { font-size: 13px; color: rgba(255,255,255,0.6); }

/* ë°˜ì‘í˜• */
@media (max-width: 768px) {
    .gnb-ul { display: none; }
    .bottom-header-box { flex-direction: column; text-align: center; }
    .sub-visual-box h2 { font-size: 2rem; }
    .bottom-footer-box { flex-direction: column; text-align: center; gap: 20px; }
}
</style>
</head>
<body class="temp01-site pc color-type01">
<div class="wrap">
    <header>
        <div class="top-header-wrap">
            <div class="top-header-box">
                <div class="top-util-box">
                    <ul>
                        <li><a href="https://www.ewha.ac.kr/ewha/index.do" target="_blank">ì´í™”ì—¬ìëŒ€í•™êµ</a></li>
                        <li><a href="#" title="ë°”ë¡œê°€ê¸°">SITEMAP</a></li>
                    </ul>
                </div>
            </div>
        </div>
        <div class="bottom-header-wrap">
            <div class="bottom-header-box">
                <h1 class="logo">
                    <a href="#" title="ë°”ë¡œê°€ê¸°">
                        <span>ì‚¬íšŒë³µì§€í•™ê³¼</span>
                    </a>
                </h1>
                <div class="gnb-wrap">
                    <div class="gnb">
                        <ul class="gnb-ul">
                            <li><a href="#" class="active">í•™ê³¼ì†Œê°œ</a></li>
                            <li><a href="#">í•™ì‚¬ì •ë³´</a></li>
                            <li><a href="#">ì…í•™ì •ë³´</a></li>
                            <li><a href="#">í•™ìƒí™œë™</a></li>
                            <li><a href="#">ìë£Œì‹¤</a></li>
                            <li><a href="#">ì»¤ë®¤ë‹ˆí‹°</a></li>
                        </ul>
                    </div>
                </div>
            </div>
        </div>
    </header>
    
    <div class="sub-visual-wrap">
        <div class="sub-visual-box">
            <h2>í•™ê³¼ì†Œê°œ</h2>
            <div class="path-depth-wrap">
                <a class="path-home" href="#" title="í™ˆ ë°”ë¡œê°€ê¸°"><span>ğŸ  í™ˆ</span></a>
                <ul>
                    <li><a href="#" class="active">í•™ê³¼ì†Œê°œ</a></li>
                    <li><a href="#" class="active">ì¸ì‚¬ë§</a></li>
                </ul>
            </div>
        </div>
    </div>
    
    <div class="sub-container">
        <div class="content-wrap">
            <div class="title">
                <div class="page-title">
                    <h3>ì¸ì‚¬ë§</h3>
                </div>
            </div>
            
            <div class="content cms-print" id="cms-content">
                <div class="cms-placeholder">
                    ğŸ“ ì´ ì˜ì—­ì— AIê°€ ìƒì„±í•œ ì¸ì‚¬ë§ ì½˜í…ì¸ ê°€ ì‚½ì…ë©ë‹ˆë‹¤<br><br>
                    â€¢ í•™ê³¼ì¥ ì¸ì‚¬ë§<br>
                    â€¢ í•™ê³¼ ì†Œê°œ ë° ë¹„ì „<br>
                    â€¢ êµìœ¡ ëª©í‘œ ë° íŠ¹ì„±<br>
                    â€¢ ì¡¸ì—…ìƒ ì§„ë¡œ ì•ˆë‚´<br><br>
                    <small style="color: #f59e0b;">ì‹¤ì œ CMSì—ì„œëŠ” ì´ ì˜ì—­ì´ AI ìƒì„± ì½˜í…ì¸ ë¡œ ìë™ êµì²´ë©ë‹ˆë‹¤</small>
                </div>
            </div>
        </div>
    </div>
    
    <footer>
        <div class="bottom-footer-wrap">
            <div class="bottom-footer-box">
                <div class="logo-box">
                    <img src="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTAwIiBoZWlnaHQ9IjQwIiB2aWV3Qm94PSIwIDAgMTAwIDQwIj48dGV4dCB4PSI1MCIgeT0iMjQiIGZvbnQtZmFtaWx5PSJBcmlhbCIgZm9udC1zaXplPSIxNiIgZmlsbD0iI2ZmZiIgdGV4dC1hbmNob3I9Im1pZGRsZSI+RVdIQTwvdGV4dD48L3N2Zz4=" alt="ì´í™”ì—¬ìëŒ€í•™êµ">
                </div>
                <div class="footer-info-box">
                    <div class="footer-util-box">
                        <ul>
                            <li><a href="#">ê°œì¸ì •ë³´ì²˜ë¦¬ë°©ì¹¨</a></li>
                            <li><a href="#">ë„¤í‹°ì¦Œìœ¤ë¦¬ê·œì•½</a></li>
                            <li><a href="#">ì´ë©”ì¼ì£¼ì†Œë¬´ë‹¨ìˆ˜ì§‘ê±°ë¶€</a></li>
                        </ul>
                    </div>
                    <div class="address-box">
                        <p class="address-txt">
                            <span>ìš°) 03760 ì„œìš¸íŠ¹ë³„ì‹œ ì„œëŒ€ë¬¸êµ¬ ì´í™”ì—¬ëŒ€ê¸¸ 52 ì´í™”ì—¬ìëŒ€í•™êµ</span>
                            <span>TEL. 02-3277-2114</span>
                        </p>
                        <p class="copyright">COPYRIGHT Â© 2024 BY EWHA WOMANS UNIVERSITY. ALL RIGHTS RESERVED.</p>
                    </div>
                </div>
            </div>
        </div>
    </footer>
</div>
</body>
</html>`;
            }
            
            isConnectionActive() {
                return this.isConnected && !this.fallbackMode;
            }
            
            isFallbackMode() {
                return this.fallbackMode;
            }
        }
    </script>
</body>
</html>